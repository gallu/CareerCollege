# 2025年度 前期 実務 期末試験

試験の回答は、以下の通りにすること。

- １問あたり１ファイルに記述。ファイル名は「問題番号.txt(例: 1.txt)」とする。拡張子は.txtであること
- dev2.m-f.netサーバのアカウント名 + プログラムが入っているディレクトリ名を記載すること

試験の注意事項は以下の通り

- 試験なので「周囲との相談」「他人の答案の覗き見」は不許可
- ネット等を使って調べるのは許可
- コードやSQLを実行 / 確認するのは推奨
- いずれの問題も「書いてある点数(記載がない場合は10点)」を満点とし、問題があったら適宜減点する

提出は、以下の通り

- 「自分の名前+各席番号」.zip のファイル名で回答を一式固めて提出

授業中に自身のDBアカウントの作成をしていない人は、試験中に速やかに以下の方法で申し出てください。  

- Teamsのチャットで「自身のアカウント名」と「DBアカウントが必要である」旨を連絡する

## (問1) 授業で作成した短縮URL: 50点

授業で作成した「短縮URL」を提出しなさい。  
授業の通りに作成をした場合、例えばアカウント名が tech_c であれば、以下の通りになる想定です。  

- アカウント名: tech_c
- ディレクトリ名: /home/tech_c/laravel_short_url

以下の各要素を採点します(各10点)。  

- ログイン前に「ログイン後TopPageへの遷移」をするとログイン画面に遷移すること
- 管理画面で適切にログインできること
- 短縮URLが登録できること
- 短縮URLの一覧が閲覧できること
- 短縮URLで、設定したURLに遷移できること

## (問2) 簡単なform入力: 50点

新しくLaravelをインストールするか、あるいは、既存にある **laravel_short_url** または **laravel_test** のいずれかへの追記で作成しなさい。
提出物には、「アカウント名」「プログラムを書いたディレクトリ名」を記述しなさい。

簡単なform入力の画面を一式作成しなさい。  
項目およびvalidate内容は以下の通りです。

- 名前(name)  
  - 必須、255文字以内  
- パスワード(password)  
  - 必須、8文字以上  
- 在庫数(stock)  
  - 必須、整数、0～9999まで  
- めも(memo)  
  - validateなし  

画面は以下の2画面を用意しなさい。  
URLは、書いてある通りにしなさい。

- **入力画面** `/exam/form/input`  
  - 上述の項目が入力できること  
  - validateエラーの時に、エラー内容が出力されること  

- **入力完了画面** `/exam/form/fin`  
  - 入力された内容のうち、名前・在庫数・めもが出力されること  

採点項目は以下の通り（各10点）

1. 入力ページが表示されること  
2. validateエラーの時にエラー表示がされること  
3. validateエラーの時に、パスワード以外の入力された値は保持されていること  
4. CSRFチェックが適切にされていること（hiddenパラメータを触って確認します）  
5. 入力完了画面で、名前・在庫数・めもが出力されること（XSSがないこと）

## (問3) 簡単な form 入力と DB への insert: 50点

新しく Laravel をインストールするか、既存の `laravel_inquiry` または `laravel_test` への追記で作成しなさい。  
提出物には、「アカウント名」「プログラムを書いたディレクトリ名」を記述しなさい。

**DB を扱うため、マイグレーションと Eloquent モデルの作成は必須**とする。

### 入力項目と validate 仕様
- 商品名（`name`）
  - 必須、文字列、255文字以内
- 在庫数（`stock`）
  - 必須、整数、0?9999
- メモ（`memo`）
  - 任意、validate なし（そのまま保存してよい）

### DB テーブル（マイグレーション必須）
- テーブル名：`exam_items`
  - カラム：`id`（PRIMARY KEY, AUTO_INCREMENT）
  - カラム：`name`（`VARCHAR(255)`）
  - カラム：`stock`（`INT UNSIGNED` 相当）
  - カラム：`memo`（`TEXT`、NULL 可）
  - `created_at` / `updated_at`（`datetimes`）

### 画面（URL は厳守）
- **入力画面** `/exam/db/input`
  - 上述の項目が入力できること
  - validate エラー時にエラー内容が表示されること
  - エラー時、**パスワード項目は無い**ため、通常通り入力値を保持してよい
- **入力完了画面** `/exam/db/fin`
  - 入力された **商品名・在庫数・メモ** を出力すること（XSS 対策された表示）
  - **DB にレコードが insert されていること**

### 採点（合計 50 点）
- 入力ページが表示される … 10 点
- validate エラー時にエラー表示が出る … 10 点
- 入力完了画面で、商品名・在庫数・メモが適切に出力される（XSS がない）… 10 点
- `exam_items` テーブルに **正しく insert される**（マイグレーション＆モデルを用いた実装）… 20 点
