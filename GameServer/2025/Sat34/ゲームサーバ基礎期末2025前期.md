# 2025年度 前期 ゲームサーバ基礎 期末試験

試験の回答は、以下の通りにすること。

- １問あたり１ファイルに記述。ファイル名は「問題番号.php(例: 1.php)」とする。拡張子は.phpであること
    - 問2から問6までは「1つのクラスに対する連続した追加実装」のため、まとめて1ファイルにしてもよいものとする
    - 問7から問8までは「1つのクラスに対する連続した追加実装」のため、まとめて1ファイルにしてもよいものとする
- 文字コードはUTF-8にすること

試験の注意事項は以下の通り

- 試験なので「周囲との相談」「他人の答案の覗き見」は不許可
- ネット等を使って調べるのは許可
- コードやSQLを実行 / 確認するのは推奨
- いずれの問題も「書いてある点数(記載がない場合は10点)」を満点とし、問題があったら適宜減点する

提出は、以下の通り

- 「自分の名前+学籍番号」.zip のファイル名で回答を一式固めて提出

## (問1) if文

変数 $temperature に、-5から40の間の乱数を代入します。以下のコードを使うとよいでしょう。  
```
$temperature = random_int(-5, 40);
```

- 30 以上なら「真夏日です」を echo で出力
- 15 以上30 未満なら「過ごしやすい気温です」を echo で出力
- 上述のいずれでもないなら「肌寒いです」を echo で出力

するコードを、if文 で書きなさい。  

## (問2) ハッシュ(連想)配列の作成とループ

次の対応表をもとに、key＝国名(文字列) → 値＝首都名(文字列)の連想配列 $capitals を作成しなさい。

- 日本 → 東京
- アメリカ → ワシントンD.C.
- フランス → パリ

その後、foreach を使って、1行につき1つ、次の形式で echo するプログラムを書きなさい。

```
日本の首都は東京です
アメリカの首都はワシントンD.C.です
フランスの首都はパリです
```

## (問3) 「変数と関数と定数」を含む簡単なクラスの作成

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `Book`  
  - 定数  
    - `DEFAULT_TITLE` 値は `Untitled`  
  - プロパティ  
    - `string` 型 `title`
  - メソッド  
    - メソッド名: `setTitle`  
      - 引数: `string` 型  
      - 処理: プロパティ `title` に引数の値を代入する  
      - 戻り値: なし  
    - メソッド名: `getTitle`  
      - 引数: なし  
      - 戻り値: `string` 型 — プロパティ `title` の値。ただし `title` が空文字なら、定数 `DEFAULT_TITLE` の値を返す  

**実装後に行うこと**  
1. `Book` クラスのインスタンスを作成しなさい。  
2. その次に `setTitle()` で値を設定しなさい。  
3. その次に **`getTitle()` で取得できた値** を `var_dump` で出力しなさい。  

## (問4) コンストラクタを含むクラス

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `Product`  
  - プロパティ  
    - `string` 型 `name`  
    - `int` 型 `price`  
  - コンストラクタ  
    - 引数: `string` 型, `int` 型  
    - 処理:  
      - 2つの引数の値をそれぞれプロパティに代入する  
      - ただし、`name` が空文字の場合、`RuntimeException` を投げる（メッセージは任意）  
      - ただし、`price` が 0 または負の値の場合、`RuntimeException` を投げる（メッセージは任意）  
  - メソッド  
    - メソッド名: `getName`  
      - 引数: なし  
      - 戻り値: `string` 型 — プロパティ `name` の値  
    - メソッド名: `getPrice`  
      - 引数: なし  
      - 戻り値: `int` 型 — プロパティ `price` の値  

**実装後に行うこと**  
1. 「正しくインスタンスが作成できる場合」でインスタンスを作成しなさい。作成したインスタンスを、`var_dump` で出力しなさい。  
2. 「例外が投げられる場合」パターンでインスタンスを作成しなさい。投げられた例外を適切に捉えて、例外のメッセージを出力しなさい。  

## (問5) 継承クラスの作成（家電と洗濯機）

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `Appliance`  
  - プロパティ  
    - `string` 型 `manufacturer` // 製造元（メーカー名）  
    - `string` 型 `modelNumber` // 型番  
  - コンストラクタ  
    - 引数: `string` 型（メーカー名）, `string` 型（型番）  
    - 処理:  
      - 2つの引数をそれぞれ対応するプロパティに代入する  
      - ただし、いずれかが空文字の場合、`RuntimeException` を投げる（メッセージは任意）  
  - メソッド  
    - メソッド名: `getInfo`  
      - 引数: なし  
      - 戻り値: `string` 型 — `"Manufacturer:{プロパティ manufacturer}, Model:{プロパティ modelNumber}"` の形式の文字列  
        - 例：メーカー名「Panasonic」、型番「NA-FA80H9」の場合、`Manufacturer:Panasonic, Model:NA-FA80H9` が期待される  

- クラス名: `WashingMachine`  
  - 継承元クラス: `Appliance`  
  - プロパティ  
    - `int` 型 `capacityKg` // 容量（kg）  
  - コンストラクタ  
    - 引数: `string` 型（メーカー名）, `string` 型（型番）, `int` 型（容量kg）  
    - 処理:  
      - 親のコンストラクタを呼び出して、`manufacturer` と `modelNumber` に値をセットする  
      - 容量の値をプロパティ `capacityKg` に代入する  
      - ただし、容量が 0 以下の場合、`RuntimeException` を投げる（メッセージは任意）  
  - メソッド  
    - メソッド名: `getWashingInfo`  
      - 引数: なし  
      - 戻り値: `string` 型 — `"Capacity: {プロパティ capacityKg}kg"` の形式の文字列  
        - 例：容量が 8 の場合、`Capacity: 8kg` が期待される  

**実装後に行うこと**  
1. `WashingMachine` クラスのインスタンスを作成しなさい。  
2. 親クラスのメソッド `getInfo()` を呼び出して結果を出力しなさい。  
3. 子クラスのメソッド `getWashingInfo()` を呼び出して結果を出力しなさい。  

## (問6) インタフェースの作成（四角形の面積）

以下のインタフェースおよびクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- インタフェース名: `ShapeInterface`  
  - メソッド  
    - メソッド名: `getArea`  
      - 引数: なし  
      - 戻り値: `float` 型  

- クラス名: `Rectangle`  
  - 継承元インタフェース: `ShapeInterface`  
  - プロパティ  
    - `float` 型 `width` // 幅  
    - `float` 型 `height` // 高さ  
  - コンストラクタ  
    - 引数: `float` 型（幅）, `float` 型（高さ）  
    - 処理:  
      - 引数の値をそれぞれのプロパティに代入する  
      - ただし、幅または高さが 0 以下の場合、`RuntimeException` を投げる（メッセージは任意）  
  - メソッド  
    - メソッド名: `getArea`  
      - 引数: なし  
      - 戻り値: `float` 型 — 幅 × 高さ の値を返す  

**実装後に行うこと**  
1. `Rectangle` クラスのインスタンスを作成しなさい（例：幅 5.0、高さ 3.0）。  
2. `getArea()` を呼び出して、得られた面積の値を出力しなさい。  

## (問7) traitの作成

以下のトレイトおよびクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- トレイト名: `LoggerTrait`  
  - メソッド  
    - メソッド名: `log`  
      - 引数: `string` 型 `$message`  
      - 戻り値: なし  
      - 処理:  
        - `"LOG: {引数の文字列}"` の形式で `echo` する  

- クラス名: `Task`  
  - 使用するトレイト: `LoggerTrait`  

**実装後に行うこと**  
1. `Task` クラスのインスタンスを作成しなさい。  
2. `log()` メソッドを呼び出し、任意の文字列を渡して出力しなさい。  
   - 例：`log("System started");` の場合、`LOG: System started` と表示されることが期待されます。  

## (問8) 静的クラスの継承（遅延静的束縛）

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `BaseGreeter`  
  - static メソッド  
    - メソッド名: `getGreeting`  
      - アクセス権: `protected`  
      - 引数: なし  
      - 戻り値: `"Hello from BaseGreeter"` の文字列を返す  
    - メソッド名: `greet`  
      - 引数: なし  
      - 戻り値: なし  
      - 処理:  
        - `getGreeting()` メソッドの戻り値を `echo` で出力する  

- クラス名: `FriendlyGreeter`  
  - 継承元クラス: `BaseGreeter`  
  - static メソッド  
    - メソッド名: `getGreeting`  
      - アクセス権: `protected`  
      - 引数: なし  
      - 戻り値: `"Hello from FriendlyGreeter"` の文字列を返す  

**実装後に行うこと**  
1. `FriendlyGreeter::greet()` を呼び出しなさい。  
2. 出力が `"Hello from BaseGreeter"` ではなく `"Hello from FriendlyGreeter"` になることを確認しなさい。  


## (問9) 状態を持つクラス（カウンタ）

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `Counter`  
  - プロパティ  
    - `int` 型 `value` 初期値は 0  
  - メソッド  
    - メソッド名: `increment`  
      - 引数: なし  
      - 戻り値: なし  
      - 処理: `value` を 1 増やす  
    - メソッド名: `getValue`  
      - 引数: なし  
      - 戻り値: `int` 型 — 現在の `value` の値を返す  

**実装後に行うこと**  
1. `Counter` クラスのインスタンスを作成しなさい。  
2. `increment()` を 2 回呼び出しなさい。  
3. `getValue()` を呼び出して結果を出力しなさい。  
   - 期待される出力は `2` となる。  

## (問10) 配列を扱うクラス（Cart と Item）

以下のクラスを定義しなさい。  
指定されている場合は**型宣言**もきちんと書くこと。  
明示されていない限り、**メソッドは public、プロパティは private** とする。  

- クラス名: `Item`  
  - プロパティ  
    - `int` 型 `price` // 価格  
  - コンストラクタ  
    - 引数: `int` 型（価格）  
    - 処理:  
      - 引数の値をプロパティ `price` に代入する  
      - ただし、価格が 0 未満の場合は `RuntimeException` を投げる（メッセージは任意）  
  - メソッド  
    - メソッド名: `getPrice`  
      - 引数: なし  
      - 戻り値: `int` 型 — `price` の値を返す  

- クラス名: `Cart`  
  - プロパティ  
    - `array` 型 `items` // `Item` の配列。初期値は空配列  
  - メソッド  
    - メソッド名: `pushItem`  
      - 引数: `Item` 型 `$item`  
      - 戻り値: なし  
      - 処理: 引数の `$item` を配列 `items` に追加する  
    - メソッド名: `total`  
      - 引数: なし  
      - 戻り値: `int` 型  
      - 処理: 配列 `items` に格納された **すべての `Item` の価格の合計** を計算して返す  

**実装後に行うこと（動作確認）**  
次のコードを実行し、期待される結果が得られることを確認しなさい。  
```php
$obj = new Cart();
$obj->pushItem(new Item(1000));
$obj->pushItem(new Item(500));
echo $obj->total(); // 期待される出力: 1500
```
